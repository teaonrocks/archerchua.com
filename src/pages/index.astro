---
import "../styles/global.css";
// Component Imports
import { Button } from "@/components/ui/button";
import { ModeToggle } from "@/components/ModeToggle";
import { MobileNav } from "@/components/MobileNav";
import { AnimatedNav } from "@/components/AnimatedNav";
import { Hero } from "@/components/Hero";
import { Timeline } from "@/components/Timeline";
import { Projects } from "@/components/Projects";
import { Footer } from "@/components/Footer";
import { MotionDemo } from "@/components/MotionDemo";
import { InteractiveBackground } from "@/components/InteractiveBackground";
import { Toaster } from "@/components/ui/sonner";

// Full Astro Component Syntax:
// https://docs.astro.build/basics/astro-components/
---

<script is:inline>
	const getThemePreference = () => {
		if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
			return localStorage.getItem("theme");
		}
		return window.matchMedia("(prefers-color-scheme: dark)").matches
			? "dark"
			: "light";
	};
	const isDark = getThemePreference() === "dark";
	document.documentElement.classList[isDark ? "add" : "remove"]("dark");

	if (typeof localStorage !== "undefined") {
		const observer = new MutationObserver(() => {
			const isDark = document.documentElement.classList.contains("dark");
			localStorage.setItem("theme", isDark ? "dark" : "light");
		});
		observer.observe(document.documentElement, {
			attributes: true,
			attributeFilter: ["class"],
		});
	}
</script>

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Archer Chua</title>
	</head>

	<body class="relative min-h-screen">
		<!-- Interactive Animated Background -->
		<InteractiveBackground client:load />

		<!-- Navigation Bar -->
		<nav
			class="fixed top-0 left-0 right-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"
		>
			<div
				class="flex h-16 items-center justify-between px-4 md:px-8 max-w-full"
			>
				<!-- Left side: Mobile menu and Name -->
				<div class="flex items-center gap-4">
					<!-- Mobile Menu (visible on mobile only) -->
					<MobileNav client:load />

					<a
						href="/"
						class="text-lg md:text-xl font-bold hover:text-primary transition-colors"
					>
						Archer Chua
					</a>

					<!-- Desktop menu items with Motion animations -->
					<AnimatedNav client:load />
				</div>

				<!-- Right side: Role and theme toggle -->
				<div class="flex items-center gap-2 md:gap-4">
					<span
						class="hidden sm:inline-block text-xs md:text-sm text-muted-foreground"
					>
						Software Engineer
					</span>
					<ModeToggle client:load />
				</div>
			</div>
		</nav>

		<!-- Main Content -->
		<main class="pt-16">
			<!-- Hero Section -->
			<section
				class="min-h-screen flex items-center justify-center px-4 md:px-8 py-12"
			>
				<Hero client:load />
			</section>

			<!-- Timeline Section -->
			<section id="about" class="min-h-screen py-16 md:py-24 px-4 md:px-8">
				<Timeline client:load />
			</section>

			<!-- Projects Section -->
			<section id="projects" class="min-h-screen py-16 md:py-24 px-4 md:px-8">
				<Projects client:load />
			</section>
		</main>

		<!-- Footer -->
		<Footer client:load />

		<!-- Toast Notifications -->
		<Toaster client:load />
	</body>
</html>
